document:
  dsl: '1.0.0-alpha1'
  namespace: test
  name: sample-workflow
  version: '0.1.0'
do:
  - name: processOrder
    switch:
      - name: case1
        when: .orderType == "electronic"
        then: processElectronicOrder
      - name: case2
        when: .orderType == "physical"
        then: processPhysicalOrder
      - name: default
        then: handleUnknownOrderType
  - name: processElectronicOrder
    execute:
      sequentially:
        - name: validatePayment
          set:
            validate: true
        - name: fulfillOrder
          set:
            status: fulfilled
    then: exit
  - name: processPhysicalOrder
    execute:
      sequentially:
        - name: checkInventory
          set:
            inventory: clear
        - name: packItems
          set:
            items: 1
        - name: scheduleShipping
          set:
            address: Elmer St
    then: exit
  - name: handleUnknownOrderType
    execute:
      sequentially:
        - name: logWarning
          set:
            log: warn
        - name: notifyAdmin
          set:
            message: something's wrong